// JavaScript Document

//SmartMenus jQuery plugin Menu+bootstrap Sec menu + Third menu
/*
 * SmartMenus jQuery v0.9.7
 * http://www.smartmenus.org/
 */

(function(e){function s(n){var s=".smartmenus_mouse";if(!i&&!n){var f=true,l=null;e(document).bind(a([["mousemove",function(n){var i={x:n.pageX,y:n.pageY,timeStamp:(new Date).getTime()};if(l){var s=Math.abs(l.x-i.x),o=Math.abs(l.y-i.y);if((s>0||o>0)&&s<=2&&o<=2&&i.timeStamp-l.timeStamp<=300){r=true;if(f){var u=e(n.target).closest("a");if(u.is("a")){e.each(t,function(){if(e.contains(this.$root[0],u[0])){this.itemEnter({currentTarget:u[0]});return false}})}f=false}}}l=i}],[u()?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut",function(e){if(o(e.originalEvent)){r=false}}]],s));i=true}else if(i&&n){e(document).unbind(s);i=false}}function o(e){return!/^(4|mouse)$/.test(e.pointerType)}function u(){return"ontouchstart"in window}function a(t,n){if(!n){n=""}var r={};e.each(t,function(e,t){r[t[0].split(" ").join(n+" ")+n]=t[1]});return r}var t=[],n=!!window.createPopup,r=false,i=false;e.SmartMenus=function(t,n){this.$root=e(t);this.opts=n;this.rootId="";this.$subArrow=null;this.subMenus=[];this.activatedItems=[];this.visibleSubMenus=[];this.showTimeout=0;this.hideTimeout=0;this.scrollTimeout=0;this.clickActivated=false;this.zIndexInc=0;this.$firstLink=null;this.$firstSub=null;this.disabled=false;this.$disableOverlay=null;this.isTouchScrolling=false;this.init()};e.extend(e.SmartMenus,{hideAll:function(){e.each(t,function(){this.menuHideAll()})},destroy:function(){while(t.length){t[0].destroy()}s(true)},prototype:{init:function(n){var r=this;if(!n){t.push(this);this.rootId=((new Date).getTime()+Math.random()+"").replace(/\D/g,"");if(this.$root.hasClass("sm-rtl")){this.opts.rightToLeftSubMenus=true}var i=".smartmenus";this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).bind(a([["mouseover focusin",e.proxy(this.rootOver,this)],["mouseout focusout",e.proxy(this.rootOut,this)]],i)).delegate("a",a([["mouseenter",e.proxy(this.itemEnter,this)],["mouseleave",e.proxy(this.itemLeave,this)],["mousedown",e.proxy(this.itemDown,this)],["focus",e.proxy(this.itemFocus,this)],["blur",e.proxy(this.itemBlur,this)],["click",e.proxy(this.itemClick,this)],["touchend",e.proxy(this.itemTouchEnd,this)]],i));i+=this.rootId;if(this.opts.hideOnClick){e(document).bind(a([["touchstart",e.proxy(this.docTouchStart,this)],["touchmove",e.proxy(this.docTouchMove,this)],["touchend",e.proxy(this.docTouchEnd,this)],["click",e.proxy(this.docClick,this)]],i))}e(window).bind(a([["resize orientationchange",e.proxy(this.winResize,this)]],i));if(this.opts.subIndicators){this.$subArrow=e("<span/>").addClass("sub-arrow");if(this.opts.subIndicatorsText){this.$subArrow.html(this.opts.subIndicatorsText)}}s()}this.$firstSub=this.$root.find("ul").each(function(){r.menuInit(e(this))}).eq(0);this.$firstLink=this.$root.find("a").eq(0);if(this.opts.markCurrentItem){var o=/(index|default)\.[^#\?\/]*/i,u=/#.*/,f=window.location.href.replace(o,""),l=f.replace(u,"");this.$root.find("a").each(function(){var t=this.href.replace(o,""),n=e(this);if(t==f||t==l){n.addClass("current");if(r.opts.markCurrentTree){n.parent().parentsUntil("[data-smartmenus-id]","li").children("a").addClass("current")}}})}},destroy:function(){this.menuHideAll();var n=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").unbind(n).undelegate(n);n+=this.rootId;e(document).unbind(n);e(window).unbind(n);if(this.opts.subIndicators){this.$subArrow=null}var r=this;e.each(this.subMenus,function(){if(this.hasClass("mega-menu")){this.find("ul").removeDataSM("in-mega")}if(this.dataSM("shown-before")){if(r.opts.subMenusMinWidth||r.opts.subMenusMaxWidth){this.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap")}if(this.dataSM("scroll-arrows")){this.dataSM("scroll-arrows").remove()}this.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})}if(r.opts.subIndicators){this.dataSM("parent-a").removeClass("has-submenu").children("span.sub-arrow").remove()}this.removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").parent().removeDataSM("sub")});if(this.opts.markCurrentItem){this.$root.find("a.current").removeClass("current")}this.$root=null;this.$firstLink=null;this.$firstSub=null;if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}t.splice(e.inArray(this,t),1)},disable:function(t){if(!this.disabled){this.menuHideAll();if(!t&&!this.opts.isPopup&&this.$root.is(":visible")){var n=this.$root.offset();this.$disableOverlay=e('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:n.top,left:n.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(true),opacity:0}).appendTo(document.body)}this.disabled=true}},docClick:function(t){if(this.isTouchScrolling){this.isTouchScrolling=false;return}if(this.visibleSubMenus.length&&!e.contains(this.$root[0],t.target)||e(t.target).is("a")){this.menuHideAll()}},docTouchEnd:function(t){if(!this.lastTouch){return}if(this.visibleSubMenus.length&&(this.lastTouch.x2===undefined||this.lastTouch.x1==this.lastTouch.x2)&&(this.lastTouch.y2===undefined||this.lastTouch.y1==this.lastTouch.y2)&&(!this.lastTouch.target||!e.contains(this.$root[0],this.lastTouch.target))){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}var n=this;this.hideTimeout=setTimeout(function(){n.menuHideAll()},350)}this.lastTouch=null},docTouchMove:function(e){if(!this.lastTouch){return}var t=e.originalEvent.touches[0];this.lastTouch.x2=t.pageX;this.lastTouch.y2=t.pageY},docTouchStart:function(e){var t=e.originalEvent.touches[0];this.lastTouch={x1:t.pageX,y1:t.pageY,target:t.target}},enable:function(){if(this.disabled){if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}this.disabled=false}},getClosestMenu:function(t){var n=e(t).closest("ul");while(n.dataSM("in-mega")){n=n.parent().closest("ul")}return n[0]||null},getHeight:function(e){return this.getOffset(e,true)},getOffset:function(e,t){var n;if(e.css("display")=="none"){n={position:e[0].style.position,visibility:e[0].style.visibility};e.css({position:"absolute",visibility:"hidden"}).show()}var r=e[0].getBoundingClientRect&&e[0].getBoundingClientRect(),i=r&&(t?r.height||r.bottom-r.top:r.width||r.right-r.left);if(!i&&i!==0){i=t?e[0].offsetHeight:e[0].offsetWidth}if(n){e.hide().css(n)}return i},getStartZIndex:function(e){var t=parseInt(this[e?"$root":"$firstSub"].css("z-index"));if(!e&&isNaN(t)){t=parseInt(this.$root.css("z-index"))}return!isNaN(t)?t:1},getTouchPoint:function(e){return e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e},getViewport:function(e){var t=e?"Height":"Width",n=document.documentElement["client"+t],r=window["inner"+t];if(r){n=Math.min(n,r)}return n},getViewportHeight:function(){return this.getViewport(true)},getViewportWidth:function(){return this.getViewport()},getWidth:function(e){return this.getOffset(e)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(e){return this.handleEvents()&&!this.isLinkInMegaMenu(e)},isCollapsible:function(){return this.$firstSub.css("position")=="static"},isCSSOn:function(){return this.$firstLink.css("display")=="block"},isFixed:function(){var t=this.$root.css("position")=="fixed";if(!t){this.$root.parentsUntil("body").each(function(){if(e(this).css("position")=="fixed"){t=true;return false}})}return t},isLinkInMegaMenu:function(e){return!e.parent().parent().dataSM("level")},isTouchMode:function(){return!r||this.isCollapsible()},itemActivate:function(t){var n=t.parent(),r=n.parent(),i=r.dataSM("level");if(i>1&&(!this.activatedItems[i-2]||this.activatedItems[i-2][0]!=r.dataSM("parent-a")[0])){var s=this;e(r.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(r).each(function(){s.itemActivate(e(this).dataSM("parent-a"))})}if(this.visibleSubMenus.length>i){this.menuHideSubMenus(!this.activatedItems[i-1]||this.activatedItems[i-1][0]!=t[0]?i-1:i)}this.activatedItems[i-1]=t;this.visibleSubMenus[i-1]=r;if(this.$root.triggerHandler("activate.smapi",t[0])===false){return}var o=n.dataSM("sub");if(o&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)){this.menuShow(o)}},itemBlur:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}this.$root.triggerHandler("blur.smapi",n[0])},itemClick:function(t){if(this.isTouchScrolling){this.isTouchScrolling=false;t.stopPropagation();return false}var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}n.removeDataSM("mousedown");if(this.$root.triggerHandler("click.smapi",n[0])===false){return false}var r=n.parent().dataSM("sub");if(this.isTouchMode()){if(n.dataSM("href")){n.attr("href",n.dataSM("href")).removeDataSM("href")}if(r&&(!r.dataSM("shown-before")||!r.is(":visible"))){this.itemActivate(n);if(r.is(":visible")){return false}}}else if(this.opts.showOnClick&&n.parent().parent().dataSM("level")==1&&r){this.clickActivated=true;this.menuShow(r);return false}if(n.hasClass("disabled")){return false}if(this.$root.triggerHandler("select.smapi",n[0])===false){return false}},itemDown:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}n.dataSM("mousedown",true)},itemEnter:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}if(!this.isTouchMode()){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}var r=this;this.showTimeout=setTimeout(function(){r.itemActivate(n)},this.opts.showOnClick&&n.parent().parent().dataSM("level")==1?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",n[0])},itemFocus:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}if((!this.isTouchMode()||!n.dataSM("mousedown"))&&(!this.activatedItems.length||this.activatedItems[this.activatedItems.length-1][0]!=n[0])){this.itemActivate(n)}this.$root.triggerHandler("focus.smapi",n[0])},itemLeave:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}if(!this.isTouchMode()){if(n[0].blur){n[0].blur()}if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}}n.removeDataSM("mousedown");this.$root.triggerHandler("mouseleave.smapi",n[0])},itemTouchEnd:function(t){var n=e(t.currentTarget);if(!this.handleItemEvents(n)){return}var r=n.parent().dataSM("sub");if(n.attr("href").charAt(0)!=="#"&&r&&(!r.dataSM("shown-before")||!r.is(":visible"))){n.dataSM("href",n.attr("href"));n.attr("href","#")}},menuFixLayout:function(e){if(!e.dataSM("shown-before")){e.hide().dataSM("shown-before",true)}},menuHide:function(e){if(this.$root.triggerHandler("beforehide.smapi",e[0])===false){return}e.stop(true,true);if(e.is(":visible")){var t=function(){e.css("z-index","")};if(this.isCollapsible()){if(this.opts.collapsibleHideFunction){this.opts.collapsibleHideFunction.call(this,e,t)}else{e.hide(this.opts.collapsibleHideDuration,t)}}else{if(this.opts.hideFunction){this.opts.hideFunction.call(this,e,t)}else{e.hide(this.opts.hideDuration,t)}}if(e.dataSM("ie-shim")){e.dataSM("ie-shim").remove()}if(e.dataSM("scroll")){this.menuScrollStop(e);e.css({"touch-action":"","-ms-touch-action":""}).unbind(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide()}e.dataSM("parent-a").removeClass("highlighted");var n=e.dataSM("level");this.activatedItems.splice(n-1,1);this.visibleSubMenus.splice(n-1,1);this.$root.triggerHandler("hide.smapi",e[0])}},menuHideAll:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}this.menuHideSubMenus();if(this.opts.isPopup){this.$root.stop(true,true);if(this.$root.is(":visible")){if(this.opts.hideFunction){this.opts.hideFunction.call(this,this.$root)}else{this.$root.hide(this.opts.hideDuration)}if(this.$root.dataSM("ie-shim")){this.$root.dataSM("ie-shim").remove()}}}this.activatedItems=[];this.visibleSubMenus=[];this.clickActivated=false;this.zIndexInc=0},menuHideSubMenus:function(e){if(!e)e=0;for(var t=this.visibleSubMenus.length-1;t>e;t--){this.menuHide(this.visibleSubMenus[t])}},menuIframeShim:function(t){if(n&&this.opts.overlapControlsInIE&&!t.dataSM("ie-shim")){t.dataSM("ie-shim",e("<iframe/>").attr({src:"javascript:0",tabindex:-9}).css({position:"absolute",top:"auto",left:"0",opacity:0,border:"0"}))}},menuInit:function(e){if(!e.dataSM("in-mega")){this.subMenus.push(e);if(e.hasClass("mega-menu")){e.find("ul").dataSM("in-mega",true)}var t=2,n=e[0];while((n=n.parentNode.parentNode)!=this.$root[0]){t++}e.dataSM("parent-a",e.prevAll("a").eq(-1)).dataSM("level",t).parent().dataSM("sub",e);if(this.opts.subIndicators){e.dataSM("parent-a").addClass("has-submenu")[this.opts.subIndicatorsPos](this.$subArrow.clone())}}},menuPosition:function(t){var n=t.dataSM("parent-a"),r=t.parent().parent(),i=t.dataSM("level"),s=this.getWidth(t),o=this.getHeight(t),f=n.offset(),l=f.left,c=f.top,h=this.getWidth(n),p=this.getHeight(n),d=e(window),v=d.scrollLeft(),m=d.scrollTop(),g=this.getViewportWidth(),y=this.getViewportHeight(),b=r.hasClass("sm")&&!r.hasClass("sm-vertical"),w=i==2?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,E=i==2?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY,S,x;if(b){S=this.opts.rightToLeftSubMenus?h-s-w:w;x=this.opts.bottomToTopSubMenus?-o-E:p+E}else{S=this.opts.rightToLeftSubMenus?w-s:h-w;x=this.opts.bottomToTopSubMenus?p-E-o:E}if(this.opts.keepInViewport&&!this.isCollapsible()){var T=l+S,N=c+x;if(this.opts.rightToLeftSubMenus&&T<v){S=b?v-T+S:h-w}else if(!this.opts.rightToLeftSubMenus&&T+s>v+g){S=b?v+g-s-T+S:w-s}if(!b){if(o<y&&N+o>m+y){x+=m+y-o-N}else if(o>=y||N<m){x+=m-N}}if(b&&(N+o>m+y+.49||N<m)||!b&&o>y+.49){var C=this;if(!t.dataSM("scroll-arrows")){t.dataSM("scroll-arrows",e([e('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],e('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).bind({mouseenter:function(){t.dataSM("scroll").up=e(this).hasClass("scroll-up");C.menuScroll(t)},mouseleave:function(e){C.menuScrollStop(t);C.menuScrollOut(t,e)},"mousewheel DOMMouseScroll":function(e){e.preventDefault()}}).insertAfter(t))}var k=".smartmenus_scroll";t.dataSM("scroll",{step:1,itemH:p,subH:o,arrowDownH:this.getHeight(t.dataSM("scroll-arrows").eq(1))}).bind(a([["mouseover",function(e){C.menuScrollOver(t,e)}],["mouseout",function(e){C.menuScrollOut(t,e)}],["mousewheel DOMMouseScroll",function(e){C.menuScrollMousewheel(t,e)}]],k)).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:S+(parseInt(t.css("border-left-width"))||0),width:s-(parseInt(t.css("border-left-width"))||0)-(parseInt(t.css("border-right-width"))||0),zIndex:t.css("z-index")}).eq(b&&this.opts.bottomToTopSubMenus?0:1).show();if(this.isFixed()){t.css({"touch-action":"none","-ms-touch-action":"none"}).bind(a([[u()?"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp",function(e){C.menuScrollTouch(t,e)}]],k))}}}t.css({top:"auto",left:"0",marginLeft:S,marginTop:x-p});this.menuIframeShim(t);if(t.dataSM("ie-shim")){t.dataSM("ie-shim").css({zIndex:t.css("z-index"),width:s,height:o,marginLeft:S,marginTop:x-p})}},menuScroll:function(e,t,n){var i=e.dataSM("scroll"),s=e.dataSM("scroll-arrows"),o=parseFloat(e.css("margin-top")),u=i.up?i.upEnd:i.downEnd,a;if(!t&&i.velocity){i.velocity*=.9;a=i.velocity;if(a<.5){this.menuScrollStop(e);return}}else{a=n||(t||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(i.step))}var f=e.dataSM("level");if(this.visibleSubMenus.length>f){this.menuHideSubMenus(f-1)}var l=i.up&&u<=o||!i.up&&u>=o?o:Math.abs(u-o)>a?o+(i.up?a:-a):u;e.add(e.dataSM("ie-shim")).css("margin-top",l);if(r&&(i.up&&l>i.downEnd||!i.up&&l<i.upEnd)){s.eq(i.up?1:0).show()}if(l==u){if(r){s.eq(i.up?0:1).hide()}this.menuScrollStop(e)}else if(!t){if(this.opts.scrollAccelerate&&i.step<this.opts.scrollStep){i.step+=.5}var c=this;this.scrollTimeout=setTimeout(function(){c.menuScroll(e)},this.opts.scrollInterval)}},menuScrollMousewheel:function(e,t){if(this.getClosestMenu(t.target)==e[0]){t=t.originalEvent;var n=(t.wheelDelta||-t.detail)>0;if(e.dataSM("scroll-arrows").eq(n?0:1).is(":visible")){e.dataSM("scroll").up=n;this.menuScroll(e,true)}}t.preventDefault()},menuScrollOut:function(t,n){if(r){if(!/^scroll-(up|down)/.test((n.relatedTarget||"").className)&&(t[0]!=n.relatedTarget&&!e.contains(t[0],n.relatedTarget)||this.getClosestMenu(n.relatedTarget)!=t[0])){t.dataSM("scroll-arrows").css("visibility","hidden")}}},menuScrollOver:function(e,t){if(r){if(!/^scroll-(up|down)/.test(t.target.className)&&this.getClosestMenu(t.target)==e[0]){this.menuScrollRefreshData(e);var n=e.dataSM("scroll");e.dataSM("scroll-arrows").eq(0).css("margin-top",n.upEnd).end().eq(1).css("margin-top",n.downEnd+n.subH-n.arrowDownH).end().css("visibility","visible")}}},menuScrollRefreshData:function(t){var n=t.dataSM("scroll"),r=e(window),i=r.scrollTop()-t.dataSM("parent-a").offset().top-n.itemH;e.extend(n,{upEnd:i,downEnd:i+this.getViewportHeight()-n.subH})},menuScrollStop:function(t){if(this.scrollTimeout){clearTimeout(this.scrollTimeout);this.scrollTimeout=0;e.extend(t.dataSM("scroll"),{step:1,velocity:0});return true}},menuScrollTouch:function(t,n){n=n.originalEvent;if(o(n)){var r=this.getTouchPoint(n);if(this.getClosestMenu(r.target)==t[0]){var i=t.dataSM("scroll");if(/(start|down)$/i.test(n.type)){if(this.menuScrollStop(t)){n.preventDefault();this.isTouchScrolling=true}else{this.isTouchScrolling=false}this.menuScrollRefreshData(t);e.extend(i,{touchY:r.pageY,touchTimestamp:n.timeStamp,velocity:0})}else if(/move$/i.test(n.type)){var s=i.touchY;if(s!==undefined&&s!=r.pageY){this.isTouchScrolling=true;e.extend(i,{up:s<r.pageY,touchY:r.pageY,touchTimestamp:n.timeStamp,velocity:i.velocity+Math.abs(r.pageY-s)*.5});this.menuScroll(t,true,Math.abs(i.touchY-s))}n.preventDefault()}else{if(i.touchY!==undefined){if(n.timeStamp-i.touchTimestamp<120&&i.velocity>0){i.velocity*=.5;this.menuScrollStop(t);this.menuScroll(t);n.preventDefault()}delete i.touchY}}}}},menuShow:function(e){if(!e.dataSM("beforefirstshowfired")){e.dataSM("beforefirstshowfired",true);if(this.$root.triggerHandler("beforefirstshow.smapi",e[0])===false){return}}if(this.$root.triggerHandler("beforeshow.smapi",e[0])===false){return}this.menuFixLayout(e);e.stop(true,true);if(!e.is(":visible")){e.css("z-index",this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1);if(this.opts.keepHighlighted||this.isCollapsible()){e.dataSM("parent-a").addClass("highlighted")}if(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth){e.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap");if(this.opts.subMenusMinWidth){e.css("min-width",this.opts.subMenusMinWidth)}if(this.opts.subMenusMaxWidth){var t=this.getWidth(e);e.css("max-width",this.opts.subMenusMaxWidth);if(t>this.getWidth(e)){e.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}}}this.menuPosition(e);if(e.dataSM("ie-shim")){e.dataSM("ie-shim").insertBefore(e)}var n=function(){e.css("overflow","")};if(this.isCollapsible()){if(this.opts.collapsibleShowFunction){this.opts.collapsibleShowFunction.call(this,e,n)}else{e.show(this.opts.collapsibleShowDuration,n)}}else{if(this.opts.showFunction){this.opts.showFunction.call(this,e,n)}else{e.show(this.opts.showDuration,n)}}this.visibleSubMenus[e.dataSM("level")-1]=e;this.$root.triggerHandler("show.smapi",e[0])}},popupHide:function(e){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}var t=this;this.hideTimeout=setTimeout(function(){t.menuHideAll()},e?1:this.opts.hideTimeout)},popupShow:function(e,t){if(!this.opts.isPopup){alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.');return}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}this.menuFixLayout(this.$root);this.$root.stop(true,true);if(!this.$root.is(":visible")){this.$root.css({left:e,top:t});this.menuIframeShim(this.$root);if(this.$root.dataSM("ie-shim")){this.$root.dataSM("ie-shim").css({zIndex:this.$root.css("z-index"),width:this.getWidth(this.$root),height:this.getHeight(this.$root),left:e,top:t}).insertBefore(this.$root)}var n=this,r=function(){n.$root.css("overflow","")};if(this.opts.showFunction){this.opts.showFunction.call(this,this.$root,r)}else{this.$root.show(this.opts.showDuration,r)}this.visibleSubMenus[0]=this.$root}},refresh:function(){this.menuHideAll();this.$root.find("ul").each(function(){var t=e(this);if(t.dataSM("scroll-arrows")){t.dataSM("scroll-arrows").remove()}}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired");this.$root.find("a.has-submenu").removeClass("has-submenu").parent().removeDataSM("sub");if(this.opts.subIndicators){this.$root.find("span.sub-arrow").remove()}if(this.opts.markCurrentItem){this.$root.find("a.current").removeClass("current")}this.subMenus=[];this.init(true)},rootOut:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}if(!this.opts.showOnClick||!this.opts.hideOnClick){var t=this;this.hideTimeout=setTimeout(function(){t.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},winResize:function(e){if(!this.handleEvents()){if(this.$disableOverlay){var t=this.$root.offset();this.$disableOverlay.css({top:t.top,left:t.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}return}if(!this.isCollapsible()&&(!("onorientationchange"in window)||e.type=="orientationchange")){if(this.activatedItems.length){this.activatedItems[this.activatedItems.length-1][0].blur()}this.menuHideAll()}}}});e.fn.dataSM=function(e,t){if(t){return this.data(e+"_smartmenus",t)}return this.data(e+"_smartmenus")};e.fn.removeDataSM=function(e){return this.removeData(e+"_smartmenus")};e.fn.smartmenus=function(t){if(typeof t=="string"){var n=arguments,r=t;Array.prototype.shift.call(n);return this.each(function(){var t=e(this).data("smartmenus");if(t&&t[r]){t[r].apply(t,n)}})}var i=e.extend({},e.fn.smartmenus.defaults,t);return this.each(function(){new e.SmartMenus(this,i)})};e.fn.smartmenus.defaults={isPopup:false,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:true,subIndicatorsPos:"prepend",subIndicatorsText:"+",scrollStep:30,scrollInterval:30,scrollAccelerate:true,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(e,t){e.fadeOut(200,t)},collapsibleShowDuration:0,collapsibleShowFunction:function(e,t){e.slideDown(200,t)},collapsibleHideDuration:0,collapsibleHideFunction:function(e,t){e.slideUp(200,t)},showOnClick:false,hideOnClick:true,keepInViewport:true,keepHighlighted:true,markCurrentItem:false,markCurrentTree:true,rightToLeftSubMenus:false,bottomToTopSubMenus:false,overlapControlsInIE:true}})(jQuery);

/*SmartMenus jQuery Bootstrap Addon*/
/*
 * SmartMenus jQuery Bootstrap Addon - v0.1.1
 * http://www.smartmenus.org/
 */

(function(e){e(function(){e("ul.navbar-nav").each(function(){var t=e(this);t.addClass("sm").smartmenus({subMenusSubOffsetX:2,subMenusSubOffsetY:-6,subIndicatorsPos:"append",subIndicatorsText:"...",collapsibleShowFunction:null,collapsibleHideFunction:null,rightToLeftSubMenus:t.hasClass("navbar-right"),bottomToTopSubMenus:t.closest(".navbar").hasClass("navbar-fixed-bottom")}).find("a.current").parent().addClass("active")}).bind({"show.smapi":function(t,n){var r=e(n),i=r.dataSM("scroll-arrows"),s=e(this).data("smartmenus");if(i){i.css("background-color",e(document.body).css("background-color"))}r.parent().addClass("open"+(s.isCollapsible()?" collapsible":""))},"hide.smapi":function(t,n){e(n).parent().removeClass("open collapsible")},"click.smapi":function(t,n){var r=e(this).data("smartmenus");if(r.isCollapsible()){var i=e(n),s=i.parent().dataSM("sub");if(s&&s.dataSM("shown-before")&&s.is(":visible")){r.itemActivate(i);r.menuHide(s);return false}}}})});e.SmartMenus.prototype.isCollapsible=function(){return this.$firstLink.parent().css("float")!="left"}})(jQuery);


/*!
 * FooTable - Awesome Responsive Tables
 * Version : 2.0.1.5
 * http://fooplugins.com/plugins/footable-jquery/
 *
 * Requires jQuery - http://jquery.com/
 *
 * Copyright 2014 Steven Usher & Brad Vincent
 * Released under the MIT license
 * You are free to use FooTable in commercial projects as long as this copyright header is left intact.
 *
 * Date: 26 Aug 2014
 */
(function(e,t,n){function i(){var e=this;e.id=null;e.busy=false;e.start=function(t,n){if(e.busy){return}e.stop();e.id=setTimeout(function(){t();e.id=null;e.busy=false},n);e.busy=true};e.stop=function(){if(e.id!==null){clearTimeout(e.id);e.id=null;e.busy=false}}}function s(n,r,s){var o=this;o.id=s;o.table=n;o.options=r;o.breakpoints=[];o.breakpointNames="";o.columns={};o.plugins=t.footable.plugins.load(o);var u=o.options,a=u.classes,f=u.events,l=u.triggers,c=0;o.timers={resize:new i,register:function(e){o.timers[e]=new i;return o.timers[e]}};o.init=function(){var n=e(t),r=e(o.table);t.footable.plugins.init(o);if(r.hasClass(a.loaded)){o.raise(f.alreadyInitialized);return}o.raise(f.initializing);r.addClass(a.loading);r.find(u.columnDataSelector).each(function(){var e=o.getColumnData(this);o.columns[e.index]=e});for(var i in u.breakpoints){o.breakpoints.push({name:i,width:u.breakpoints[i]});o.breakpointNames+=i+" "}o.breakpoints.sort(function(e,t){return e["width"]-t["width"]});r.unbind(l.initialize).bind(l.initialize,function(){r.removeData("footable_info");r.data("breakpoint","");r.trigger(l.resize);r.removeClass(a.loading);r.addClass(a.loaded).addClass(a.main);o.raise(f.initialized)}).unbind(l.redraw).bind(l.redraw,function(){o.redraw()}).unbind(l.resize).bind(l.resize,function(){o.resize()}).unbind(l.expandFirstRow).bind(l.expandFirstRow,function(){r.find(u.toggleSelector).first().not("."+a.detailShow).trigger(l.toggleRow)}).unbind(l.expandAll).bind(l.expandAll,function(){r.find(u.toggleSelector).not("."+a.detailShow).trigger(l.toggleRow)}).unbind(l.collapseAll).bind(l.collapseAll,function(){r.find("."+a.detailShow).trigger(l.toggleRow)});r.trigger(l.initialize);n.bind("resize.footable",function(){o.timers.resize.stop();o.timers.resize.start(function(){o.raise(l.resize)},u.delay)})};o.addRowToggle=function(){if(!u.addRowToggle)return;var t=e(o.table),n=false;t.find("span."+a.toggle).remove();for(var r in o.columns){var i=o.columns[r];if(i.toggle){n=true;var s="> tbody > tr:not(."+a.detail+",."+a.disabled+") > td:nth-child("+(parseInt(i.index,10)+1)+"),"+"> tbody > tr:not(."+a.detail+",."+a.disabled+") > th:nth-child("+(parseInt(i.index,10)+1)+")";t.find(s).not("."+a.detailCell).prepend(e(u.toggleHTMLElement).addClass(a.toggle));return}}if(!n){t.find("> tbody > tr:not(."+a.detail+",."+a.disabled+") > td:first-child").add("> tbody > tr:not(."+a.detail+",."+a.disabled+") > th:first-child").not("."+a.detailCell).prepend(e(u.toggleHTMLElement).addClass(a.toggle))}};o.setColumnClasses=function(){$table=e(o.table);for(var t in o.columns){var n=o.columns[t];if(n.className!==null){var r="",i=true;e.each(n.matches,function(e,t){if(!i)r+=", ";r+="> tbody > tr:not(."+a.detail+") > td:nth-child("+(parseInt(t,10)+1)+")";i=false});$table.find(r).not("."+a.detailCell).addClass(n.className)}}};o.bindToggleSelectors=function(){var t=e(o.table);if(!o.hasAnyBreakpointColumn())return;t.find(u.toggleSelector).unbind(l.toggleRow).bind(l.toggleRow,function(t){var n=e(this).is("tr")?e(this):e(this).parents("tr:first");o.toggleDetail(n)});t.find(u.toggleSelector).unbind("click.footable").bind("click.footable",function(n){if(t.is(".breakpoint")&&e(n.target).is("td,th,."+a.toggle)){e(this).trigger(l.toggleRow)}})};o.parse=function(e,t){var n=u.parsers[t.type]||u.parsers.alpha;return n(e)};o.getColumnData=function(t){var n=e(t),r=n.data("hide"),i=n.index();r=r||"";r=jQuery.map(r.split(","),function(e){return jQuery.trim(e)});var s={index:i,hide:{},type:n.data("type")||"alpha",name:n.data("name")||e.trim(n.text()),ignore:n.data("ignore")||false,toggle:n.data("toggle")||false,className:n.data("class")||null,matches:[],names:{},group:n.data("group")||null,groupName:null};if(s.group!==null){var a=e(o.table).find('> thead > tr.footable-group-row > th[data-group="'+s.group+'"], > thead > tr.footable-group-row > td[data-group="'+s.group+'"]').first();s.groupName=o.parse(a,{type:"alpha"})}var l=parseInt(n.prev().attr("colspan")||0,10);c+=l>1?l-1:0;var h=parseInt(n.attr("colspan")||0,10),p=s.index+c;if(h>1){var d=n.data("names");d=d||"";d=d.split(",");for(var v=0;v<h;v++){s.matches.push(v+p);if(v<d.length)s.names[v+p]=d[v]}}else{s.matches.push(p)}s.hide["default"]=n.data("hide")==="all"||e.inArray("default",r)>=0;var m=false;for(var g in u.breakpoints){s.hide[g]=n.data("hide")==="all"||e.inArray(g,r)>=0;m=m||s.hide[g]}s.hasBreakpoint=m;var y=o.raise(f.columnData,{column:{data:s,th:t}});return y.column.data};o.getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)};o.calculateWidth=function(e,t){if(jQuery.isFunction(u.calculateWidthOverride)){return u.calculateWidthOverride(e,t)}if(t.viewportWidth<t.width)t.width=t.viewportWidth;if(t.parentWidth<t.width)t.width=t.parentWidth;return t};o.hasBreakpointColumn=function(e){for(var t in o.columns){if(o.columns[t].hide[e]){if(o.columns[t].ignore){continue}return true}}return false};o.hasAnyBreakpointColumn=function(){for(var e in o.columns){if(o.columns[e].hasBreakpoint){return true}}return false};o.resize=function(){var t=e(o.table);if(!t.is(":visible")){return}if(!o.hasAnyBreakpointColumn()){return}var n={width:t.width(),viewportWidth:o.getViewportWidth(),parentWidth:t.parent().width()};n=o.calculateWidth(t,n);var r=t.data("footable_info");t.data("footable_info",n);o.raise(f.resizing,{old:r,info:n});if(!r||r&&r.width&&r.width!==n.width){var i=null,s;for(var u=0;u<o.breakpoints.length;u++){s=o.breakpoints[u];if(s&&s.width&&n.width<=s.width){i=s;break}}var a=i===null?"default":i["name"],c=o.hasBreakpointColumn(a),h=t.data("breakpoint");t.data("breakpoint",a).removeClass("default breakpoint").removeClass(o.breakpointNames).addClass(a+(c?" breakpoint":""));if(a!==h){t.trigger(l.redraw);o.raise(f.breakpoint,{breakpoint:a,info:n})}}o.raise(f.resized,{old:r,info:n})};o.redraw=function(){o.addRowToggle();o.bindToggleSelectors();o.setColumnClasses();var t=e(o.table),n=t.data("breakpoint"),r=o.hasBreakpointColumn(n);t.find("> tbody > tr:not(."+a.detail+")").data("detail_created",false).end().find("> thead > tr:last-child > th").each(function(){var r=o.columns[e(this).index()],i="",s=true;e.each(r.matches,function(e,t){if(!s){i+=", "}var n=t+1;i+="> tbody > tr:not(."+a.detail+") > td:nth-child("+n+")";i+=", > tfoot > tr:not(."+a.detail+") > td:nth-child("+n+")";i+=", > colgroup > col:nth-child("+n+")";s=false});i+=', > thead > tr[data-group-row="true"] > th[data-group="'+r.group+'"]';var u=t.find(i).add(this);if(n!==""){if(r.hide[n]===false)u.addClass("footable-visible").show();else u.removeClass("footable-visible").hide()}if(t.find("> thead > tr.footable-group-row").length===1){var f=t.find('> thead > tr:last-child > th[data-group="'+r.group+'"]:visible, > thead > tr:last-child > th[data-group="'+r.group+'"]:visible'),l=t.find('> thead > tr.footable-group-row > th[data-group="'+r.group+'"], > thead > tr.footable-group-row > td[data-group="'+r.group+'"]'),c=0;e.each(f,function(){c+=parseInt(e(this).attr("colspan")||1,10)});if(c>0)l.attr("colspan",c).show();else l.hide()}}).end().find("> tbody > tr."+a.detailShow).each(function(){o.createOrUpdateDetailRow(this)});t.find("> tbody > tr."+a.detailShow+":visible").each(function(){var t=e(this).next();if(t.hasClass(a.detail)){if(!r)t.hide();else t.show()}});t.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column");t.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column");t.find("> thead > tr, > tbody > tr").find("> th.footable-visible:last, > td.footable-visible:last").addClass("footable-last-column").end().find("> th.footable-visible:first, > td.footable-visible:first").addClass("footable-first-column");o.raise(f.redrawn)};o.toggleDetail=function(t){var n=t.jquery?t:e(t),r=n.next();if(n.hasClass(a.detailShow)){n.removeClass(a.detailShow);if(r.hasClass(a.detail))r.hide();o.raise(f.rowCollapsed,{row:n[0]})}else{o.createOrUpdateDetailRow(n[0]);n.addClass(a.detailShow).next().show();o.raise(f.rowExpanded,{row:n[0]})}};o.removeRow=function(t){var n=t.jquery?t:e(t);if(n.hasClass(a.detail)){n=n.prev()}var r=n.next();if(n.data("detail_created")===true){r.remove()}n.remove();o.raise(f.rowRemoved)};o.appendRow=function(t){var n=t.jquery?t:e(t);e(o.table).find("tbody").append(n);o.redraw()};o.getColumnFromTdIndex=function(t){var n=null;for(var r in o.columns){if(e.inArray(t,o.columns[r].matches)>=0){n=o.columns[r];break}}return n};o.createOrUpdateDetailRow=function(t){var n=e(t),r=n.next(),i,s=[];if(n.data("detail_created")===true)return true;if(n.is(":hidden"))return false;o.raise(f.rowDetailUpdating,{row:n,detail:r});n.find("> td:hidden").each(function(){var t=e(this).index(),n=o.getColumnFromTdIndex(t),r=n.name;if(n.ignore===true)return true;if(t in n.names)r=n.names[t];s.push({name:r,value:o.parse(this,n),display:e.trim(e(this).html()),group:n.group,groupName:n.groupName});return true});if(s.length===0)return false;var l=n.find("> td:visible").length;var c=r.hasClass(a.detail);if(!c){r=e('<tr class="'+a.detail+'"><td class="'+a.detailCell+'"><div class="'+a.detailInner+'"></div></td></tr>');n.after(r)}r.find("> td:first").attr("colspan",l);i=r.find("."+a.detailInner).empty();u.createDetail(i,s,u.createGroupedDetail,u.detailSeparator,a);n.data("detail_created",true);o.raise(f.rowDetailUpdated,{row:n,detail:r});return!c};o.raise=function(t,n){if(o.options.debug===true&&e.isFunction(o.options.log))o.options.log(t,"event");n=n||{};var r={ft:o};e.extend(true,r,n);var i=e.Event(t,r);if(!i.ft){e.extend(true,i,r)}e(o.table).trigger(i);return i};o.reset=function(){var t=e(o.table);t.removeData("footable_info").data("breakpoint","").removeClass(a.loading).removeClass(a.loaded);t.find(u.toggleSelector).unbind(l.toggleRow).unbind("click.footable");t.find("> tbody > tr").removeClass(a.detailShow);t.find("> tbody > tr."+a.detail).remove();o.raise(f.reset)};o.init();return o}t.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(t){return e(t).data("value")||e.trim(e(t).text())},numeric:function(t){var n=e(t).data("value")||e(t).text().replace(/[^0-9.\-]/g,"");n=parseFloat(n);if(isNaN(n))n=0;return n}},addRowToggle:true,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td",detailSeparator:":",toggleHTMLElement:"<span />",createGroupedDetail:function(e){var t={_none:{name:null,data:[]}};for(var n=0;n<e.length;n++){var r=e[n].group;if(r!==null){if(!(r in t))t[r]={name:e[n].groupName||e[n].group,data:[]};t[r].data.push(e[n])}else{t._none.data.push(e[n])}}return t},createDetail:function(e,t,n,r,i){var s=n(t);for(var o in s){if(s[o].data.length===0)continue;if(o!=="_none")e.append('<div class="'+i.detailInnerGroup+'">'+s[o].name+"</div>");for(var u=0;u<s[o].data.length;u++){var a=s[o].data[u].name?r:"";e.append('<div class="'+i.detailInnerRow+'"><div class="'+i.detailInnerName+'">'+s[o].data[u].name+a+'</div><div class="'+i.detailInnerValue+'">'+s[o].data[u].display+"</div></div>")}}},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name",detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row",expandAll:"footable_expand_all",collapseAll:"footable_collapse_all"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized",redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed",reset:"footable_reset"},debug:false,log:null},version:{major:0,minor:5,toString:function(){return t.footable.version.major+"."+t.footable.version.minor},parse:function(e){version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(e);return{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(n){if(!e.isFunction(n)){if(t.footable.options.debug===true)console.error('Validation failed, expected type "function", received type "{0}".',typeof n);return false}var r=new n;if(typeof r["name"]!=="string"){if(t.footable.options.debug===true)console.error('Validation failed, plugin does not implement a string property called "name".',r);return false}if(!e.isFunction(r["init"])){if(t.footable.options.debug===true)console.error('Validation failed, plugin "'+r["name"]+'" does not implement a function called "init".',r);return false}if(t.footable.options.debug===true)console.log('Validation succeeded for plugin "'+r["name"]+'".',r);return true},registered:[],register:function(n,r){if(t.footable.plugins._validate(n)){t.footable.plugins.registered.push(n);if(typeof r==="object")e.extend(true,t.footable.options,r)}},load:function(e){var n=[],r,i;for(i=0;i<t.footable.plugins.registered.length;i++){try{r=t.footable.plugins.registered[i];n.push(new r(e))}catch(s){if(t.footable.options.debug===true)console.error(s)}}return n},init:function(e){for(var n=0;n<e.plugins.length;n++){try{e.plugins[n]["init"](e)}catch(r){if(t.footable.options.debug===true)console.error(r)}}}}};var r=0;e.fn.footable=function(n){n=n||{};var i=e.extend(true,{},t.footable.options,n);return this.each(function(){r++;var t=new s(this,i,r);e(this).data("footable",t)})}})(jQuery,window);


/*
 * bootstrap-tagsinput v0.4.2 by Tim Schlechter
 * 
 */

!function(a){"use strict";function b(b,c){this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var d=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+d+" !important;",this.build(c)}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};b.prototype={constructor:b,add:function(b,c){var d=this;if(!(d.options.maxTags&&d.itemsArray.length>=d.options.maxTags||b!==!1&&!b)){if("string"==typeof b&&d.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!d.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(d.isSelect&&!d.multiple&&d.itemsArray.length>0&&d.remove(d.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var f=b.split(",");if(f.length>1){for(var g=0;g<f.length;g++)this.add(f[g],!0);return void(c||d.pushVal())}}var h=d.options.itemValue(b),i=d.options.itemText(b),j=d.options.tagClass(b),k=a.grep(d.itemsArray,function(a){return d.options.itemValue(a)===h})[0];if(!k||d.options.allowDuplicates){if(!(d.items().toString().length+b.length+1>d.options.maxInputLength)){var l=a.Event("beforeItemAdd",{item:b,cancel:!1});if(d.$element.trigger(l),!l.cancel){d.itemsArray.push(b);var m=a('<span class="tag '+e(j)+'">'+e(i)+'<span data-role="remove"></span></span>');if(m.data("item",b),d.findInputWrapper().before(m),m.after(" "),d.isSelect&&!a('option[value="'+encodeURIComponent(h)+'"]',d.$element)[0]){var n=a("<option selected>"+e(i)+"</option>");n.data("item",b),n.attr("value",h),d.$element.append(n)}c||d.pushVal(),(d.options.maxTags===d.itemsArray.length||d.items().toString().length===d.options.maxInputLength)&&d.$container.addClass("bootstrap-tagsinput-max"),d.$element.trigger(a.Event("itemAdded",{item:b}))}}}else if(d.options.onTagExists){var o=a(".tag",d.$container).filter(function(){return a(this).data("item")===k});d.options.onTagExists(b,o)}}}},remove:function(b,c){var d=this;if(d.objectItems&&(b="object"==typeof b?a.grep(d.itemsArray,function(a){return d.options.itemValue(a)==d.options.itemValue(b)}):a.grep(d.itemsArray,function(a){return d.options.itemValue(a)==b}),b=b[b.length-1]),b){var e=a.Event("beforeItemRemove",{item:b,cancel:!1});if(d.$element.trigger(e),e.cancel)return;a(".tag",d.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",d.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,d.itemsArray)&&d.itemsArray.splice(a.inArray(b,d.itemsArray),1)}c||d.pushVal(),d.options.maxTags>d.itemsArray.length&&d.$container.removeClass("bootstrap-tagsinput-max"),d.$element.trigger(a.Event("itemRemoved",{item:b}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal()},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0).trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){e.add(this.map[a])},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=e.options.typeaheadjs||{};e.$input.typeahead(null,j).on("typeahead:selected",a.proxy(function(a,b){e.add(j.valueKey?b[j.valueKey]:b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}{var k=c.val().length;Math.ceil(k/5)}c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val(""),b.preventDefault());{var h=c.val().length;Math.ceil(h/5)}c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this).data("tagsinput");if(f)if(c||d){if(void 0!==f[c]){var g=f[c](d);void 0!==g&&e.push(g)}}else e.push(f);else f=new b(this,c),a(this).data("tagsinput",f),e.push(f),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map